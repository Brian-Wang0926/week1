<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>week2</title>
</head>
<body>
    <script>
//task1

        function findAndPrint(messages){
    // write down your judgment rules in comments
    // 判斷準則:字串中是否有以下條件"18","college student","vote for Donald Trump"，若有包含這些文字，則印出來名字
    // your code here, based on your own rules
            let nameover17=[];
            for(let name in messages){
                if(checkAge(messages[name])){
                    nameover17.push(name);
                }
            }
            console.log(nameover17);
            }
        function checkAge(description){
            const keywords=["18","college","legal","vote"];
            for(let word of description.split(" ")){
                for(let keyword of keywords){
                    if(word.includes(keyword)){
                        return true;
                    }
                }
            }
            return false;
        }
        findAndPrint({
        "Bob":"My name is Bob. I'm 18 years old.",
        "Mary":"Hello, glad to meet you.",
        "Copper":"I'm a college student. Nice to meet you.",
        "Leslie":"I am of legal age in Taiwan.",
        "Vivian":"I will vote for Donald Trump next week",
        "Jenny":"Good morning." });

//task2
        function calculateSumOfBonus(data){
    // write down your bonus rule in comments
    
    //performance："above average":*0.05 "average"*0.03 "below average"*0.01
    //role："Engineer"+20000twd "CEO"+30000twd "Sales"+10000twd
    //bonus = (salary + role) * performance
    
    // your code here, based on your own rules
            let bonus=0;
            for(let i=0;i<data["employees"].length;i++){
                const role=data["employees"][i]["role"];
                const performance=data["employees"][i]["performance"];
                const salary=data["employees"][i]["salary"];
                bonus+=(calculateSalary(salary)+calculateRole(role))*calculatePerformance(performance);
            }
            if(bonus>10000){
                console.log(10000);
            }else{
                console.log(Math.round(bonus));
            }
        }
        function calculateRole(role){
            if(role==="Engineer"){
                return 20000;
            }else if(role==="CEO"){
                return 30000;
            }else{
                return 10000;
            }
        }
        function calculatePerformance(performance){
            if(performance==="above average"){
                return 0.05;
            }else if(performance === "average"){
                return 0.03;
            }else{
                return 0.01;
            }
        }
        function calculateSalary(salary){
            try {
                if(salary.includes("USD")){
                    salary=parseInt(salary.replace(/[USD,]/g,""))*30;    //正規表達法
                    return salary;
                }else{
                    salary=parseInt(salary.replace(/[USD,]/g,""));
                    return salary;
                }
            } catch{
                return salary;
            }
        }
        calculateSumOfBonus({
        "employees":[
            {
                "name":"John",
                "salary":"1000USD",
                "performance":"above average",
                "role":"Engineer"
            },
            {
                "name":"Bob", 
                "salary":60000, 
                "performance":"average", 
                "role":"CEO"
            },
            {
                "name":"Jenny", 
                "salary":"50,000", 
                "performance":"below average", 
                "role":"Sales"
            } 
        ]
    }) 

//task3

        function func(...data){
            let list=[];
            for(let i=0; i < data.length; i++){
                list.push(data[i][1]);
            }
            let notRepeat=[];
            for (let j of list){
                const count = list.filter(name => name === j).length;
                if(count===1 && !notRepeat.includes(j)){
                    notRepeat.push(j);
                }
            }
            for(let q of data){
                for(let k of notRepeat){
                    if(q.includes(k)){
                        console.log(q);
                    }
                }
            }
            if(notRepeat.length==0){
                console.log("沒有")
            }
            }
        func("彭大牆", "王明雅", "吳明"); // print 彭大牆
        func("郭靜雅", "王立強", "林靜宜", "郭立恆", "林花花"); // print 林花花
        func("郭宣雅", "林靜宜", "郭宣恆", "林靜花"); // print 沒有

//task4
        function getNumber(index){
        // your code here
        if(index % 2 === 0){
            let NumEven = 0;
            for(let i = 0; i < index; i+=2){
                NumEven+=3;     
            }
            console.log(NumEven);
        }else{
            let NumOdd = 4;
            for(let j = 1; j < index; j+=2){
                NumOdd+=3;
            }
            console.log(NumOdd);
        }
        }
        getNumber(1); // print 4
        getNumber(5); // print 10
        getNumber(10); // print 15
    </script>
</body>
</html>